:root {
  --bg: #07080f;
  --bg-card: rgba(13, 15, 27, 0.85);
  --text: #f2f4ff;
  --muted: #9ea5cc;
  --line: rgba(155, 164, 218, 0.2);
  --accent: #7a77ff;
  --accent2: #18d2c5;
  --danger: #ff6a8f;
}
* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: Inter, system-ui, sans-serif;
  background: radial-gradient(circle at 10% 10%, #191a2f 0, var(--bg) 40%), var(--bg);
  color: var(--text);
}
.grain { position: fixed; inset: 0; pointer-events: none; opacity: .08; background-image: radial-gradient(#fff 0.3px, transparent 0.3px); background-size: 3px 3px; }
.app-shell { display: grid; grid-template-columns: 280px 1fr; gap: 1rem; min-height: 100vh; padding: 1rem; }
.card { background: var(--bg-card); border: 1px solid var(--line); border-radius: 16px; backdrop-filter: blur(10px); }
.sidebar { padding: 1rem; display: flex; flex-direction: column; gap: .8rem; }
ul { list-style: none; padding: 0; margin: 0; }
#project-list li, #capsule-list li { padding: .55rem .65rem; border-radius: 10px; cursor: pointer; border: 1px solid transparent; }
#project-list li:hover, #capsule-list li:hover { transform: translateY(-1px); border-color: var(--line); background: rgba(122,119,255,.15); }
#project-list li.active { background: rgba(24,210,197,.15); border-color: rgba(24,210,197,.35); }
.main-content { display: grid; grid-template-rows: auto auto 1fr; gap: 1rem; }
.topbar { padding: .9rem; display: grid; grid-template-columns: 220px 1fr auto auto; gap: .7rem; align-items: center; }
.workspace { display: grid; grid-template-columns: 1.15fr .85fr; gap: 1rem; }
.chat { display: grid; grid-template-rows: 1fr auto; min-height: 520px; padding: .9rem; }
.messages { overflow: auto; display: flex; flex-direction: column; gap: .6rem; }
.message { padding: .7rem .8rem; border-radius: 10px; max-width: 90%; }
.message.user { align-self: flex-end; background: rgba(122,119,255,.25); }
.message.ai { background: rgba(24,210,197,.15); }
.side-panel { padding: .9rem; display: grid; grid-template-rows: auto 1fr; gap: 1rem; }
#dropzone { border: 1px dashed rgba(122,119,255,.5); border-radius: 12px; padding: 1rem; text-align: center; }
#dropzone.drag { background: rgba(122,119,255,.15); }
.row { display: flex; gap: .6rem; }
input, select, button { background: rgba(7,9,18,.9); color: var(--text); border: 1px solid var(--line); border-radius: 10px; padding: .55rem .65rem; }
button { cursor: pointer; }
button:hover { border-color: var(--accent); }
button.danger:hover { border-color: var(--danger); }
.banner { padding: .8rem .9rem; border-radius: 12px; border: 1px solid rgba(255,190,120,.4); background: rgba(255,190,120,.08); }
.status.ok { color: var(--accent2); }
.status.warn { color: #ffcf8a; }
.muted { color: var(--muted); }
.hidden { display: none; }
:focus-visible { outline: 2px solid var(--accent2); outline-offset: 2px; }
@media (max-width: 1080px) {
  .app-shell, .workspace { grid-template-columns: 1fr; }
  .topbar { grid-template-columns: 1fr; }
}
